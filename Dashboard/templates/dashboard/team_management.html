{% extends "base_dashboard.html" %}
{% load crispy_forms_tags %}

{% block overview-head %}
<article class="col-sm-8">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <td class="col-sm-3">University</td>
                <td class="col-sm-4">Country</td>
                <td class="col-sm-3">Application Status</td>
            </tr>
        
        </thead>
        <tbody>
            <h2>Team Applications</h2>
            <h4>Selected/Accepted Applications <small>({{teamlist_accepted|length }}/{{ teamlist|length }})</small> </h4>
            {% for application in teamlist_accepted %}
                <tr class="success">
                    <td><a href="{% url 'dashboard:team_detail' application.applicant.team.slug %}">{{ application.applicant.team.university }}</a></td>
                    <td>{{ application.applicant.team.country.name }}</td>
                    <td>{{ application.get_status_display }}</td>
                    <td>{{ application}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% comment %}{% endcomment %}
    <table class="table table-striped table-hover">
        <thead>
            {% comment %}<tr>
                <td>University</td>
                <td>Country</td>
                <td>Application Status</td>
            </tr>{% endcomment %}
        
        </thead>
        <tbody>
            <h4>Reviewed Applications <small>({{teamlist_reviewed|length }}/{{ teamlist|length }})</small></h4>
            {% for application in teamlist_reviewed %}
                <tr class="warning">
                    <td class="col-sm-3"><a href="{% url 'dashboard:team_detail' application.applicant.team.slug %}">{{ application.applicant.team.university }}</a></td>
                    <td class="col-sm-4">{{ application.applicant.team.country.name }}</td>
                    <td class="col-sm-3">{{ application.get_status_display }}</td>
                    <td>{{ application}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% comment %}{% endcomment %}
    <table class="table table-striped table-hover">
        {% comment %}<thead>
            <tr>
                <td>University</td>
                <td>Country</td>
                <td>Application Status</td>
            </tr>
        
        </thead>{% endcomment %}
        <tbody>
            <h4>Unreviewed Applications <small>({{teamlist_unreviewed|length }}/{{ teamlist|length }})</small></h4>
            {% for application in teamlist_unreviewed %}
                <tr>
                    <td class="col-sm-3"><a href="{% url 'dashboard:team_detail' application.applicant.team.slug %}">{{ application.applicant.team.university }}</a></td>
                    <td class="col-sm-4">{{ application.applicant.team.country.name }}</td>
                    <td class="col-sm-3">{{ application.get_status_display }}</td>
                    <td>{{ application}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% comment %}{% endcomment %}
    <table class="table table-striped table-hover">
        {% comment %}<thead>
            <tr>
                <td>University</td>
                <td>Country</td>
                <td>Application Status</td>
            </tr>
        
        </thead>{% endcomment %}
        <tbody>
            <h4>Declined Applications <small>({{teamlist_declined|length }}/{{ teamlist|length }})</small></h4>
            {% for application in teamlist_declined %}
                <tr class="danger">
                    <td class="col-sm-3"><a href="{% url 'dashboard:team_detail' application.applicant.team.slug %}">{{ application.applicant.team.university }}</a></td>
                    <td class="col-sm-4">{{ application.applicant.team.country.name }}</td>
                    <td class="col-sm-3">{{ application.get_status_display }}</td>
                    <td>{{ application}}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
</article>

{% comment %}Sidebar{% endcomment %}
<article class="col-sm-4">
    <header class="row">
        
        {% if team.applicant.team.university_logo.url %}
            <div class="col-sm-4">
                <img class="img-responsive" src="{{ team.applicant.team.university_logo.url }}" alt="">
            </div>
        {% endif %}
            
        <div class="col-sm-8">
            <h3>{{ team.applicant.team.university }}</h3>
            <h4>{{ team.applicant.team.country.name }}</h4>
        </div>

    </header>
    <content class="row">
        <article class="row">
            <header>
                <h4>Assessor Scores</h4>
                <small></small>
            </header>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <td>Member</td>
                        <td>Q1</td>
                        <td>Q2</td>
                        <td>Q3</td>
                        <td>Q4</td>
                    </tr>
                </thead>
                <tbody>
                    {% for member in team.applicant.team.members.all %}
                    <tr>
                        <td>{{ member.user.get_full_name}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </article>
        {% comment %}{% endcomment %}
        <article class=>
            <header>
            </header>
            <form method="POST" class="form-horizontal">
                {% crispy form %}
            </form>
        </article>       
    </content>
</article>
{% endblock overview-head %}

{% comment %} SUMMARY STATISTIC DISPLAY {% endcomment %}
{% block content-header %}
<section class="row">
    {% for member in team.applicant.team.members.all %}
        <article class="col-sm-3">
            <header>
                <img src="{{ member.profile.profileImg.url }}" alt="">
                <h5>{{member.role|capfirst}}</h5>
                <h3>{{ member.user.get_full_name }}</h3>
            </header>
            <table class="table table-striped table-hover">
                <small>Expert Ratings</small>
                <thead>
                    <tr>
                        <td>Year</td>
                        <td>Reviewer</td>
                        <td>D1</td>
                        <td>D2</td>
                        <td>D3</td>
                        <td>D4</td>
                    </tr>
                </thead>
                <tbody>
                    {% for application in member.application_set.all %}
                        {% for review in application.review_set.all %}
                            <tr>
                                <td>{{ application.competition_year }}</td>
                                <td>{{ review.reviewer.last_name }}</td>
                                <td>{{ review.question_1 }}</td>
                                <td>{{ review.question_2 }}</td>
                                <td>{{ review.question_3 }}</td>
                                <td>{{ review.question_4 }}</td>
                            </tr>
                        {% endfor %}
                    {% endfor %}
                </tbody>
            </table>
            {% comment %}{% endcomment %}
            <table class="table table-striped table-hover">
                
                {% if member.user.profile.studentprofile.competition_set %}
                    <small>Competition Experience</small>
                    {% for competition in member.user.profile.studentprofile.competition_set.all %}
                        <tr>
                            <td><img src="{{ competition.country.flag }}" alt=""></td>
                            <td>{{ competition.year }}</td>
                            <td>{{ competition.name }}</td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <h5> -- Competition Experience missing --</h5>
                {% endif %}
            </table>
            {% comment %}{% endcomment %}
            <table class="table table-striped table-hover">
                {% if member.user.profile.studentprofile.internship_set %}
                    <small>International Experience</small>
                    {% for internship in member.user.profile.studentprofile.internship_set.all %}
                        <tr>
                            <td class="col-sm-1"><img src="{{ internship.country.flag }}" alt=""></td>
                            <td class="col-sm-1">{{ internship.year }}</td>
                            <td>{{ internship.duration }}</td>
                            <td>{{ internship.position }}</td>
                            <td></td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <p> -- International Experience missing --</p>
                {% endif %}
            </table>
        </article>
    {% endfor %}
</section>
  
<section class="row">
    <article class="col-sm-6">
        <header>
            <h3>Historical Performance</h3>
        </header>
        <img src="https://www.placehold.it/460x200" alt="">
        <img src="https://www.placehold.it/100x200" alt="">
        Display a lineplot over the individual averages for each category
        over all historical years of participation
    </article>
    <article class="col-sm-6">
        <header>
            <h3>Feedback Sentiment Analysis</h3>
        </header>
        <img src="https://www.placehold.it/460x200" alt="">
        <img src="https://www.placehold.it/100x200" alt="">
        Display Summary Statistics for the Feedback given as ratings.
        Display Emotions associated with the Comments given to the Assessors by Students
    </article>
</section>
{% endblock content-header %}

{% comment %}{% endcomment %}
{% block content-main %}

{% endblock content-main %}

{% comment %}{% endcomment %}
{% block content-sidemenue %}
<h4>Sidebar</h4>


<article class="row">
    <header>
        <h4></h4>
    </header>
</article>

<article class="row">
    <header>
        <h4>Internal Comment</h4>
    </header>
</article>
{% endblock content-sidemenue %}