{% extends "base_dashboard.html" %}

{% block overview-head %}
{% endblock overview-head %}

{% block content-main %}
    <article class="row">
        <header class="col-sm-8">
            <h3>Venue Overview</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <td>Status</td>
                        <td>Venue</td>
                        <td>Rooms</td>
                        <td>Sessions</td>
                    </tr>
                </thead>
                <tbody>
                {% for venue in venue_list %}
                    <tr>
                        <td>{{venue.get_booking_status_display}}</td>
                        <td><a href="{% url 'dashboard:manage_venue_detail' venue.slug %}">{{venue.name}}</a></td>
                        <td>{{venue.room_set.count}}</td>
                        <td>{{venue.session_set.count}}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </header>
        <content class="col-sm-4">
            <small>Details for </small>
            <h3>{{selected_venue.name}}</h3>
            <small>Sessions scheduled</small>
            <table class="table table-sm">
                <thead>
                    <tr>
                        <td>Date</td>
                        <td>Session</td>
                        <td>Room</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                     
                     {% for session in session_sel %}
                         <tr>
                            <td>{{session.startTime|date:'d.m'}}</td>
                            <td>{{session.name}}</td>
                            <td>{{session.room}}</td>
                        </tr>
                     {% endfor %}
                         
                </tbody>
            </table>
        </content>
    </article>
    
    {% comment %}Room Management{% endcomment %}
    <section class="row">
        <article class="row">
            <header>
                <h3>Rooms @ {{selected_venue.name}}</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <td>Room</td>
                            {% for day in competition_days %}
                            <td>{{day|date:'d.m'}}</td>   
                            {% endfor %}                             
                        </tr>
                    </thead>
                    <tbody>
                        {% for room  in rooms_sel %}
                        <tr>
                            <td>{{room.name}}</td>
                            
                            {% for day,slot in room.check_timeslots.items %}
                                <td><small>{{day.day}}{{day.month}}||{{slot.free_from|date:'h:m'}} - {{slot.free_till|date:'h:m'}}</small></td>
                            {% endfor %}
                                
                        </tr>
                        {% endfor %}
                            
                    </tbody>
                </table>
            </header>
        </article>
    </section>
{% endblock content-main %}

{% block content-sidemenue %}
{% endblock content-sidemenue %}